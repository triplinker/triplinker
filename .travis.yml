language: python

dist: bionic

python:
  - "3.8"
  
install:
  - pip install poetry
  - poetry install

services:
  - postgresql

before_script:
  - cd triplinker
  - psql -c "create database test;" -U postgres
  - psql -c "create user test with encrypted password 'test';" -U postgres
  - psql -c "grant all privileges on database test to test;" -U postgres

env:
  global:
    - DEBUG=on
    - SECRET_KEY="dev"
    - DATABASE_URL=psql://test:test@127.0.0.1:5432/test
    - STATIC_URL=/static/

script:
  - pytest
